ch
[Notes] O非表示DBをQうアプリケ`ションの_k手について
 ECREAプロジェクトの移管作Iで、O非表示DBにするO置Qをg施したところ、Oが重}して存在してしまうという障害がk生しました。 事象?原因?再k防止策を以下にまとめましたので、再k防止にして何かご意があれば教えてください。}なければうなぎのたれに反映させたいと思います。 事象 O非表示DBにしてO置Qをしたところ、本番のDB上で同じ名前のOが２つ存在していた。gHに文を利用して_Jしてみると、新旧のOが混在して表示されていた。 原因 O置Q元NTFとO置Q先NTFとでOのUNIDがなっていたため。 原因 O非表示のDBにしてO置Qを行う龊悉稀Staging ServerにO置Qを行い、レプリカでOを反映する。このためOのUNIDがなると、レプリカしたHに同一のOとみなされず、新しいOとして反映されてしまう。 _k者自身は上の事象を理解していたため注意して_kしていたものの、上のF象にきづけなかった。 再k防止策 ■_Jするタイミング（1度の_kで3回）　 　①．Coding完了後～Test_始前　 -　②のタイミングで}がk生することを防ぐため。 　②．Test完了後～UAT_始前　　 -　③のタイミングで}がk生することを防ぐため。 　③．UAT完了後～本番移管前　　 -　本番移管のタイミングで}がk生することを防ぐため。 ※Defect赆幛盎卮_Jする。 ■_Jする内容 新に作成したO以外で、UNIDが一致していることを_Jする。　※F在のBaselineのOにはUNIDが表示されないため、涓が必要 ■万が一差を食訾筏龊悉攴椒 ①_k前の本番NTFを取得し、新に作成したO以外でUNIDが不一致のOをO置Q禁止にO定する。 ②今回涓したNTFで、①をO置Qする。 ③今回涓w所を、②のNTFへ反映する。 ④今回涓w所を、②のNTFへ反映してから、O置Q禁止を解除する ⑤Deltaで今回涓したNTFと③のNTFを比^し、Oに差がk生しないことを_Jする。（Coding/Test後の龊稀⒃Oの反映漏れがないようにするため。) ⑥_k前の本番NTFと③のNTFのBaselineを比^し、新に作成したO以外で、UNIDが一致していることを_Jする。 