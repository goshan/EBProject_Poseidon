ch
测试机JMS配置
 说明：以下所述都是在6.1版本，不同版本可能有所不同；控制台的更改要保存到主配置才能生效 建立总线 进入websphere控制台,选择&ldquo;服务集成&rdquo;下的&ldquo;总线&rdquo;新建一个总线，如 点击所创建总线， 点击&ldquo;总线成员&rdquo;给总线设置成员，按照步骤选择默认的即可；点击&ldquo;目标&rdquo;给总线创建目标，在新建的时候选择&ldquo;队列&rdquo;，此时新建的队列，在JMS队列创建的时候要与之对应，可将此处的队列和JMS队列设置成同名，一便对应时区分。 点击&ldquo;总线成员&rdquo;给总线设置成员，按照步骤选择默认的即可；点击&ldquo;目标&rdquo;给总线创建目标，在新建的时候选择&ldquo;队列&rdquo;，此时新建的队列，在JMS队列创建的时候要与之对应，可将此处的队列和JMS队列设置成同名，一便对应时区分。 a.点服务集成- 总线-》新建-》 输入bsnRecordBus - 下一步-》完成-》保存到主配置 b.点击刚才建立的总线-》总线成员 》添加-》选择服务器-》下一步-》下一步-》下一步-》完成 》保存到主配置 c.点击 目标-新建-》队列-》下一步-》输入queueRecord -》下一步-》下一步-》完成》保存到主配置 建立连接工厂 进入websphere控制台，选择&ldquo;资源&rdquo;下的&ldquo;JMS&rdquo;，次菜单下一般会有三个工厂：连接工厂、队列连接工厂、主题连接工厂，按照原理连接工厂兼容下面两种工厂，但是建议创建队列连接工厂，创建队列连接工厂的时候只要设置名称、JNDI名称、选择总线即可。 a. 选择作用域 节点=STH64V01Node03,服务器=server1 （以后配置作用域类似） b. 新建-》确定-》 名称填RecordQueueConnectionFactory -》JNDI 名称填jms/RecordQueueConnectionFactory -》总线名选 bsnRecordBus -》应用-》保存 创建队列 &ldquo;资源&rdquo;-- &ldquo;JMS&rdquo;-- &ldquo;队列&rdquo;点击&ldquo;新建&rdquo;选择Default messaging provider 除了设置名称和JNDI名称外还要选择对应的总线，以及对应队列名（总线目标中） a.点击资源-》JMS-》队列-》新建-》确定-》名称填queueRecord ,jndi 名称填jms/queueRecord- 总线名字选择bsnRecordBus -》队列名选择queueRecord -》确定-》保存 创建激活规范 &ldquo;资源&rdquo;-- &ldquo;JMS&rdquo;-- &ldquo;激活规范&rdquo;激活规范的创建需要设置&ldquo;名称&rdquo;、&ldquo;JNDI名称&rdquo;、 &ldquo;目标类型&rdquo;、&ldquo;目标JNDI名称&rdquo;、&ldquo;总线名&rdquo;，目标JNDI的名称为发送队列的JNDI a .资源&rdquo;-- &ldquo;JMS&rdquo;-- &ldquo;激活规范&rdquo;激活规范的创建需要设置&ldquo;名称&rdquo;、&ldquo;JNDI名称&rdquo;、 &ldquo;目标类型&rdquo;、&ldquo;目标JNDI名称&rdquo;、&ldquo;总线名&rdquo;，目标JNDI的名称为发送队列的JNDI - 保存 5．项目发布 EJB的项目一般要打成.ear的包进行发布，可以在eclipse中将项目发布成.ear此处就不再说明；在发布的过程中要指定&ldquo;消息驱动的bean 监听器绑定&rdquo;如下图 要说明的是，websphere6.0之前的版本是使用设置&ldquo;监听器端口&rdquo;的方法，6.0之后的版本使用指定&ldquo;激活规范&rdquo;的方法。 特别注意： ibm-ejb-jar-bnd.xmi 这个文件中不要给消息驱动bean配置JNDI绑定了（我没有绑定成功过，导致发包的时候都不通过，报错为ear包损坏），发包的时候手动填写绑定的激活规范中目标资源的JNDI的名称这里是 activeBsnRecord 激活规范中的队列的JNDI 名字要和JMS- 队列中的队列的JNDI一致 以上都是得配置都是节点作用域，在集群中只要改成集群作用域即可 