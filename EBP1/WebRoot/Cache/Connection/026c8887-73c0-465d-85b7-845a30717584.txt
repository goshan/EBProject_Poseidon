ch
关于AIX的Quota
 之前的一个Change，涉及到了AIX的Quota，准备以及实际操作的时候，遇到并解决了一些问题，现将经验分享如下。 首先，对于如何设置Quota，Google一下，立刻可以找到，我也就不赘述了。还是专注于遇到的问题吧。 1）Filesystem在/etc/filesystems文件中，quota属性设置成了"userquota"或是"groupquota"或是二者兼有，而所使用的quota.user或quota.group 文件存在问题的情况下，lsfs -q FS 的结果中，看到的是"Quota : no"。执行"repquota FS "命令，会出现以下报错： A system call received a parameter that is not valid. *** Report for user quotas on /localwork (/dev/lworklv) Block limits File limits User used soft hard grace used soft hard grace Segmentation fault(coredump) 而且会在 errpt 中生成一条错误日志：A924A5FC XXXXXXXX P S SYSPROC SOFTWARE PROGRAM ABNORMALLY TERMINATED。 解决方法是先移除quota属性，然后重新设置。因为执行 chfs -a "quota = userquota" FS （以只对用户做限额为例）的时候， 会检查quota.user是否有效。假如这个文件无效，会被清空并重新生成。 2）quotaon/quotaoff 命令可以控制Quota设定的有效与否。系统重启之后，默认好像是Quota生效的。 3）quota.user和quota.group文件的所有者必须是root，所属组必须是system。否则的话，quotaon命令无法成功，会出现"Operation not permitted"的错误。 但是，在Filesystem的属性中，quota不为no的情况下，这两个文件是无法更改Ownership的。所以，万一，这两个文件的ownership不正确， 需要先 chfs -a "quota = no" FS ，然后才能更改权限。之后再设置quota，用quotaon生效，就没问题了。 