ch
如何在DB2 V9下找出机器上所有的实例？
 [标题]如何在DB2 V9下找出机器上所有的实例？ 环境: 产品：DB2 V9.1 平台：AIX，Solaris，HP-UX，Linux 版本：V9.1 问题描述: 对于DB2&reg; 版本9，可以在同一台计算机上安装和运行多个DB2 副本。DB2 副本指的是在多一台计算机上的特定位置安装的一个或多个DB2 数据库产品。每个DB2 副本可以处于相同或不同代码级别。 对于DB2 UDB 版本8或更早版本，可以用db2ilist这个命令列出机器上所有的DB2实例，但是在版本9上，一个DB2 安装副本下的db2ilist命令，仅列示调用了db2ilist命令的DB2 副本中的实例。 那么如何找出机器上所有的DB2 版本9的实例呢？ 解答: 为了找出机器上所有的DB2 版本9的实例，我们首先要找出所有DB2安装副本的路径，然后再找出这个副本副本下的所有实例。如果要找出所有安装副本下的所有实例，就需要在任何一个安装副本的路径下使用一次db2ls和db2ilist的命令组合。 例如：为了列出所有已安装的产品，就要进入到$INSTALLDIR/install 目录并运行db2ls，这样就能列出所有的DB2 版本9的安装路径和安装日期 $ ./db2ls Install Path Level Fix Pack Special Install Number Install Date -------------------------------------------------------------------------------------------- /space2/db2v91/V9 9.1.0.0 0 Fri Aug 04 10:22:29 2006 CDT /space2/db2v92/V9FP1 9.1.0.1 1 Mon Dec 11 15:29:39 2006 CST 接下来，进入到同一个安装副本下的instance目录($INSTALLDIR/instance)，执行db2ilist，就可以得到一个所有使用这个安装副本的实例的列表 $ ./db2ilist db2v9i1 db2inst2 在不同的安装副本下执行db2ilist，就可以找出所有的实例。作为一个可以选择的简化方法，我们可以编辑一个shell脚本instlist 在$INSTALLDIR/install目录下， $ cat instlist ./db2ls -c | awk &#39;/^[^#]/{print $1}&#39; FS=: | while read dir; do echo "====Under d irectory "$dir "===="; $dir/instance/db2ilist; done 进入到$INSTALLDIR/install (任何一个安装路径) 执行上述脚本，就会返回每一个安装路径下的对应于该安装路径的全部实例了。 $ ./instlist ====Under directory /opt/IBM/db2/V9.1 ==== db2v9i1 db2inst2 ====Under directory /space2/db2v92/V9FP1 ==== db2v92 